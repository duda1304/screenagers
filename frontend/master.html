<!DOCTYPE html>
<meta charset="utf-8" />
<meta
  name="viewport"
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"
/>
<meta name="theme-color" content="#333333" />
<meta name="msapplication-navbutton-color" content="#333333" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<link rel="manifest" href="/static/manifest.json" />
<link rel="icon" sizes="32x32" href="/static/icon.png" />
<link rel="apple-touch-startup-image" href="/static/icon.png" />
<link rel="stylesheet" href="/css/common.css?v=1.0" />
<script src="/socket.io/socket.io.js"></script>
<script src="/js/lib/jquery.min.js"></script>
<script src="/js/lib/howler.min.js"></script>
<script src="/js/lib/twemoji.min.js"></script>

<title>üéõÔ∏è MASTER</title>

<link rel="stylesheet" href="/data/decors.css?v=1.0" />

<link rel="stylesheet" href="/js/lib/spectrum.css" />
<script src="/js/lib/spectrum.min.js"></script>

<link rel="stylesheet" href="/js/lib/jquery-ui.min.css" />
<script src="/js/lib/jquery-ui.min.js"></script>

<script src="/js/lib/mousetrap.min.js"></script>
<script src="/js/lib/jquery.scrollTo.min.js"></script>

<link rel="stylesheet" href="/css/master.css?v=1.0" />

<main id="master" class="gradient">
  <div class="box-h box-fit">
    <div class="box-v">
      <div class="box-h">
        <div class="box-v">
          <div class="box-h">
            <header class="box-h box-debug closed">
              <b>debug</b>
              <div id="debug"></div>
            </header>
            <header class="box-h box-tools _closed">
              <b>tools</b>
              <div id="tools"></div>
            </header>
            <!-- <div class="box-h box-media">
              <b>media</b>
              <section id="media">
                <div class="media_cat">
                  <i title="styles css">üóõ</i>
                  <div class="media_styles"></div>
                </div>
                <div class="media_cat">
                  <i title="decors css">üåà</i>
                  <div class="media_decors"></div>
                </div>
                <div class="media_cat">
                  <i title="pages iframe">üåê</i>
                  <div class="media_pages"></div>
                </div>
                <div class="media_cat">
                  <i title="pages iframe">üåê</i>
                  <div class="media_layouts"></div>
                </div>
                <div class="media_cat">
                  <i title="videos">üìΩÔ∏è</i>
                  <div class="media_video"></div>
                </div>
                <div class="media_cat">
                  <i title="audio">üéß</i>
                  <div class="media_audio"></div>
                </div>
                <div class="media_cat">
                  <i title="gifs">üñºÔ∏è</i>
                  <div class="media_gifs"></div>
                </div>
                <div class="media_cat">
                  <i title="images">üì∑</i>
                  <div class="media_images"></div>
                </div>
              </section>
            </div> -->
            <footer class="box-h box-emojis closed hide">
              <b>emojis</b>
              <div id="emojis"></div>
            </footer>
            <!-- <footer class="box-h box-shortcuts closed">
              <b>shortcuts</b>
              <div id="shortcuts"></div>
            </footer> -->
            <footer class="box-h box-shortcuts closed">
              <b>osc settings</b>
              <form action="" id="form_osc_ip">
                <div class="box-v">
                  <button class="box-min icon" type="submit">üíæ</button>
                  <input id="osc_ip" name="ip" type="text" placeholder="ip" />
                </div>
              </form>
            </footer>
            <footer class="box-h box-presets _closed">
              <b>presets</b>
              <div id="presets" class="box-v box-wrap"></div>
            </footer>
          </div>
          <div class="box-h box-visual">
            <b>visual</b>
            <header class="box-v">
              <button id="visual__save" class="icon box-min">üíæ</button>
              <button id="visual__add_scene"><span class="icon">‚ûï</span> sc√®ne</button>
              <button id="visual__add_step"><span class="icon">‚ûï</span> √©tape</button>
              <button id="visual__openall" title="Open all" class="icon">‚è¨</button>
              <button id="visual__closeall" title="Close all" class="icon">‚è´</button>
              <button id="visual__rename" title="Rename" class="icon">‚úç</button>
              <button id="visual__clone" title="Clone" class="icon">üë¨</button>
              <button id="visual__delete" title="Delete" class="icon">üóëÔ∏è</button>
            </header>
            <section id="visual"></section>
            <footer>
              <div class="box-v">
                <button id="visual__prev" class="icon">‚¨ÖÔ∏è</button>
                <button id="visual__next" class="icon">‚û°Ô∏è</button>
              </div>
            </footer>
          </div>
        </div>
        <footer class="box-h box-screens">
          <b>screens</b>
          <div id="screens" class="box-v">
            <form id="main-screen-layout" style="display: flex; flex-direction: column;">
              Display layout
              <input name="top" id="top" value="75%"></input>
              <input name="left" id="left" value="5%"></input>
              <input name="width" id="width" value="25%"></input>
              <input name="height" id="height" value="auto"></input>
              <div id="layout"></div>
            </form>
          </div>
        </footer>
      </div>
      <aside class="box-h box-fit" style="width: 25vw">
        <div class="box-h box-users">
          <b>users</b>
          <header class="_hide box-v box-random-users">
            <!-- <button
              id="refresh_mobiles"
              class="icon box-min"
              title="Reload tout les mobiles"
            >
              ‚ôª
            </button> -->
            <input
              title="Nombre d'utilisateurs tir√©s au sort"
              id="number_random_users"
              type="number"
              min="0"
              value="1"
            />
            <button id="select_random_users" class="icon box-min">üé≤</button>
          </header>
          <div class="users_container">
            <table class="table-users">
              <thead>
                <th><input checked id="users_check_all" type="checkbox" /></th>
                <th></th>
                <th>pseudo</th>
                <th>karma</th>
              </thead>
              <tbody id="users"></tbody>
            </table>
          </div>
          <header id="users_stats">
            <span id="nb_users_inscrits">0</span> inscrit(s) /
            <span id="nb_users_connectes">0</span> connect√©(s)
          </header>
          <footer id="reponses" class="box-v box-wrap"></footer>
          <footer>
            <form id="interactions">
              <div class="box-h">
                <textarea
                  cols="44"
                  rows="3"
                  id="one_shot__message"
                  placeholder="message"
                  name="message"
                ></textarea>
                <img id="image-msg"></img>
                <button
                  type="submit"
                  title="Envoyer le message (Ctrl+Enter)"
                  class="icon"
                >
                  üì©
                </button>
              </div>
            </form>
          </footer>
        </div>

        <div class="box-h box-monitoring">
          <b>monitoring</b>
          <section id="monitoring"></section>
        </div>

        <footer class="box-h box-boites">
          <b>√©tats</b>
          <form id="boite">
            <header class="box-h box-boites-type">
              <div id="boites_types" class="box-v box-wrap"></div>
            </header>
            <textarea
              class="screen__input screen__texte"
              cols="44"
              rows="6"
              placeholder="data"
              name="arg"
            ></textarea>
            <footer class="box-v">
              <button type="submit" title="Envoyer la boite (Ctrl+Enter)" class="icon">
                üì¢
              </button>
            </footer>
          </form>
        </footer>
        <footer class="box-h box-jump">
          <b>saut ver sune sc√®ne</b>
          <form id="saut">
            <div class="box-h">
              <select name="scene" id="saut_select">
                <option value="">...</option>
              </select>
              <div class="box-v">
                <button
                  type="submit"
                  title="Envoyer le message OSC (Ctrl+Enter)"
                  class="icon"
                >
                  üì¢
                </button>
              </div>
            </div>
          </form>
        </footer>

        <footer class="box-h box-osc hide">
          <b>osc</b>
          <form id="osc">
            <div class="box-h">
              <input
                type="number"
                name="message"
                placeholder="preset number (0 = Noir)"
              />
              <div class="box-v">
                <button
                  type="submit"
                  title="Envoyer le message OSC (Ctrl+Enter)"
                  class="icon"
                >
                  üì¢
                </button>
              </div>
            </div>
          </form>
        </footer>
      </aside>
    </div>
    <footer class="box-v">
      <button class="repet__rewind icon box-min">‚è™</button>
      <button class="repet__pause toggle icon box-min">‚è∏Ô∏è</button>
      <button class="repet__forward icon box-min">‚è©</button>
      <input
        style="width:78px"
        min="0"
        max="59"
        id="repet__min"
        type="number"
        class="box-min"
        placeholder="minutes"
      />
      <button class="icon" id="send_all_screens">üì¢</button>
    </footer>
  </div>
</main>

<template id="tmpl_screen__ctrl">
  <div class="screen__ctrl">
    <div class="box-v">
      <input
        autocomplete="off"
        _list="list_decors"
        class="color-picker _box-min"
        type="text"
        placeholder="decor"
        name="decor.src"
      />
      <input
        autocomplete="off"
        _list="list_decors"
        type="text"
        placeholder="decor"
        name="decor.style"
      />
      <input
        style="flex: 0 0 58px"
        type="number"
        min="0"
        max="100"
        placeholder="vol."
        title="Volume"
        name="decor.volume"
      />
      <div class="button_radio box-min">
        <label title="Lecture en boucle">
          <input type="checkbox" name="decor.loop" />
          <span class="icon">üîÅ</span>
        </label>
      </div>
    </div>
    <div class="box-v button_radio">
      <label title="L'image ou la video recouvre tout l'√©cran (avec crop)">
        <input class="radio_fit" checked type="radio" value="cover" name="decor.fit" />
        <span>cover</span>
      </label>
      <label title="L'image ou la video s'affiche en entier (sans crop)">
        <input class="radio_fit" type="radio" value="contain" name="decor.fit" />
        <span>contain</span>
      </label>
    </div>
      <label title="Avatars displayed on screen" class="avatars-on">
        <input class="radio_fit" type="radio" value="on" name="avatars" />
        <span>avatars on</span>
      </label>
      <label title="Avatars not displayed on screen" class="avatars-off">
        <input class="radio_fit" type="radio" value="off" name="avatars" />
        <span>avatars off</span>
      </label>
      <input
      class="avatars"
      type="text"
      style="height:10px"
     
      name="avatars_area"
      id="avatars_area"
    ></input>
    <div class="box-v">
      <input
        autocomplete="off"
        list="list_musics"
        type="text"
        placeholder="music"
        name="music.src"
      />
      <input
        style="flex: 0 0 58px"
        type="number"
        min="0"
        max="100"
        placeholder="vol."
        title="Volume"
        name="music.volume"
      />
      <div class="button_radio box-min">
        <label title="Lecture en boucle">
          <input type="checkbox" name="music.loop" />
          <span class="icon">üîÅ</span>
        </label>
      </div>
    </div>
    <!-- <div class="box-v">
      <select class="select_text_language">
      </select>
    </div> -->
    <div class="box-v">
      <textarea
        autocomplete="off"
        cols="44"
        rows="6"
        placeholder="texte"
        name="texte"
      ></textarea>
    </div>
    <div class="box-v">
      <input
        autocomplete="off"
        list="list_styles"
        type="text"
        placeholder="style"
        name="style"
      />
      <input
        autocomplete="off"
        class="color-picker _box-min"
        type="text"
        placeholder="color"
        name="color"
      />
    </div>
    <div class="box-v">
      <input
        autocomplete="off"
        list="list_modes"
        type="text"
        placeholder="mode d'affichage"
        name="mode_aff"
      />
    </div>
    <!-- <div class="box-v">
      <textarea
        autocomplete="off"
        cols="44"
        rows="2"
        placeholder="code"
        name="code"
      ></textarea>
    </div> -->
  </div>
</template>

<div id="layout_modal" class="modal">
  <div class="modal-content" style="display: flex; flex-direction: column; align-items: center;">
    <span class="close" style="align-self: flex-end;">&times;</span>
      <section style="width:65%; height: 65%; position: relative;" id="preview-window">
          <iframe src="/screen" style="width:100%; height: 100%; border: none; position: relative;" id="screen-frame"></iframe>
          <div style="position:absolute; width: 100%; height: 100%; top:0; left: 0; z-index:666665"></div>
          <div style="position: absolute; top: 75%; left: 5%; width: 25%; height: 18%; resize: both; overflow: hidden; z-index:666666; background-color: green;" id="console-div">
            <div style="width:100%; height: 100%; border: none; background-color: green; text-align: center;" id="console-frame">CONSOLE</div>
            <div id="drag" style = "position: absolute; top: 5%; left: 5%; width: 90%; height: 90%; z-index:666667"></div>
          </div>
      </section>
      <button onclick="saveEtapeLayout()">Save scene layout</button>
  </div>
</div>

<div id="QR_modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeQRmodal()">&times;</span>
    <div class="display-cover">
      <video id="stream" autoplay></video>
      <div class="video-options">
          <select name="" id="" class="custom-select"><option value="">Select camera</option></select>
      </div>
      <div class="controls d-none">
          <button class="play streamControl" title="Play">&gt;</button>
          <button class="pause d-none streamControl" title="Pause">||</button>
      </div>
    </div>
      <button onclick="readCode()">Save scene layout</button>
  </div>
</div>

<script src="/js/common.js?v=1.0"></script>
<script>
  cat = 'master';
</script>
<script src="/js/iso.js?v=1.0"></script>
<script src="/js/boites_mobile.js?v=1.0"></script>
<script src="/js/boites_master.js?v=1.0"></script>
<script src="/js/modes.js?v=1.0"></script>
<script src="/js/master.js?v=1.0"></script>

